.PHONY: $(OSHMCUDA_MOD_CLEAN)

$(OSHMCUDA_MOD_PTARGET) : $(OSHMCUDA_MOD_POBJ)
	$(NVCC_LD) $(LD_PFLAGS) $(OSHMCUDA_MOD_LDPFLAGS) $^ -o $@ $(LD_SFLAGS) $(OSHMCUDA_MOD_LDSFLAGS)
	@printf "\n***** OSHMCUDA modules built successfully *****\n\n"

$(OSHMCUDA_DIR)/obj/%.o : $(OSHMCUDA_DIR)/%.cpp
	$(OSHM_CPP) $(C_COMMON_FLAGS) $(C_WARNING_FLAGS) $(C_SHARED_FLAGS) $(C_DEP_FLAGS) $(OSHMCUDA_MOD_CINC)  $< -o $@

$(OSHMCUDA_DIR)/obj/%.o : $(OSHMCUDA_DIR)/%.cu
	$(NVCC) $(C_COMMON_FLAGS) -Xcompiler="$(C_WARNING_FLAGS) $(C_SHARED_FLAGS)" $(OSHMCUDA_MOD_NVCCFLAGS) $(OSHMCUDA_MOD_CINC) $< -o $@

$(OSHMCUDA_DIR)/obj/%.o : $(ROOT_DIR)/%.cpp
	$(OSHM_CPP) $(C_COMMON_FLAGS) $(C_WARNING_FLAGS) $(C_SHARED_FLAGS) $(C_DEP_FLAGS) $(OSHMCUDA_MOD_CINC) $< -o $@

include $(wildcard $(OSHMCUDA_DIR)/obj/*.d)

$(OSHMCUDA_MOD_CLEAN) :
	$(RM) $(RM_FLAGS) $(OSHMCUDA_MOD_POBJ) 
	$(RM) $(RM_FLAGS) $(OSHMCUDA_MOD_PTARGET)
	$(RM) $(RM_FLAGS) $(OSHMCUDA_DIR)/obj/*.d
